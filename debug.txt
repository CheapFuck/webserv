[DEBUG] File not here22 found: var/www/html/favicon.ico
[DEBUG] File not found: var/www/html/favicon.ico
=================================================================
==22342==ERROR: AddressSanitizer: heap-use-after-free on address 0x6130000002f0 at pc 0x000000539112 bp 0x723ba03eb600 sp 0x723ba03eb5f8
WRITE of size 4 at 0x6130000002f0 thread T19
    #0 0x539111 in Response::setStatusCode(HttpStatusCode) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/response.cpp:40:17
    #1 0x54bcc7 in GetMethod::processRequest(Request const&, Response&, ServerConfig const&, LocationRule const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/get.cpp:98:18
    #2 0x4f5711 in Client::_processRequestByMethod(ServerConfig const&, LocationRule const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/client.cpp:51:20
    #3 0x4f5fe3 in Client::processRequest(ServerConfig const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/client.cpp:101:12
    #4 0x505e58 in Server::_processRequestAsync(int, Client&)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:544:16
    #5 0x50577c in void std::__invoke_impl<void, Server::_processRequestAsync(int, Client&)::$_0&>(std::__invoke_other, Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #6 0x50574c in std::__invoke_result<Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #7 0x505728 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::__call<void>(std::tuple<>&&, std::_Index_tuple<>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:495:11
    #8 0x5056b3 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:580:17
    #9 0x5055ac in void std::__invoke_impl<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::__invoke_other, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #10 0x50557c in std::enable_if<is_invocable_r_v<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>, void>::type std::__invoke_r<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #11 0x50554d in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1489:13
    #12 0x50532d in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1430:6
    #13 0x5051ff in std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> std::__invoke_impl<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::__invoke_other, std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #14 0x505121 in std::enable_if<is_invocable_r_v<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()...>, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9
    #15 0x504eff in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #16 0x52b1c5 in std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #17 0x52aa45 in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:587:27
    #18 0x52b143 in void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:74:14
    #19 0x52af9b in std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #20 0x52af38 in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:852:4
    #21 0x52ae38 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:21
    #22 0x52add8 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::__invoke() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:16
    #23 0x723baca99ee7 in __pthread_once_slow nptl/./nptl/pthread_once.c:116:7
    #24 0x504e0a in __gthread_once(int*, void (*)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:700:12
    #25 0x52a80d in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:859:21
    #26 0x52a265 in std::__future_base::_State_baseV2::_M_set_result(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>, bool) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:426:2
    #27 0x5045a3 in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1492:8
    #28 0x530026 in std::packaged_task<void ()>::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1626:12
    #29 0x507a3c in std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()::operator()() const /mnt/c/Users/Surface Book 3/Desktop/webserv_git/./thread-pool.hpp:66:35
    #30 0x5079fc in Server::_processRequestAsync(int, Client&)::$_0& std::__invoke_impl<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(std::__invoke_other, &&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #31 0x50798c in std::enable_if<is_invocable_r_v<Server::_processRequestAsync(int, Client&)::$_0&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...>, Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke_r<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(&&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #32 0x5077bc in std::_Function_handler<void (), std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #33 0x579412 in std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #34 0x577ca4 in ThreadPool::ThreadPool(unsigned long)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/webserv_git/thread-pool.cpp:30:17
    #35 0x57797c in void std::__invoke_impl<void, ThreadPool::ThreadPool(unsigned long)::$_0>(std::__invoke_other, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #36 0x57790c in std::__invoke_result<ThreadPool::ThreadPool(unsigned long)::$_0>::type std::__invoke<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #37 0x5778e4 in void std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:279:13
    #38 0x5778b4 in std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:286:11
    #39 0x5777c8 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:231:13
    #40 0x723bacee62b2  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe62b2)
    #41 0x723baca94ac2 in start_thread nptl/./nptl/pthread_create.c:442:8
    #42 0x723bacb2684f  misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81

0x6130000002f0 is located 240 bytes inside of 336-byte region [0x613000000200,0x613000000350)
freed by thread T0 here:
    #0 0x4d3fcd in operator delete(void*) (/mnt/c/Users/Surface Book 3/Desktop/webserv_git/webserv_db+0x4d3fcd)
    #1 0x50bd8c in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:158:2
    #2 0x50bd5c in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:200:25
    #3 0x50bd5c in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::deallocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:496:13
    #4 0x50bc19 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_put_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:567:9
    #5 0x50bb7d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_drop_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:634:2
    #6 0x5282bd in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_erase_aux(std::_Rb_tree_const_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2497:7
    #7 0x5280e9 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1211:2
    #8 0x50a75d in std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:1086:21
    #9 0x4faeaf in Server::_removeClient(int) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:298:11
    #10 0x4fc5ba in Server::_handleClientInput(int, Client&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:366:9
    #11 0x4fd197 in Server::_handleClientIo(int, short) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:413:3
    #12 0x501baa in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:792:13
    #13 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/main.cpp:69:28
    #14 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/webserv_git/main.cpp:100:9
    #15 0x723baca29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

previously allocated by thread T0 here:
    #0 0x4d376d in operator new(unsigned long) (/mnt/c/Users/Surface Book 3/Desktop/webserv_git/webserv_db+0x4d376d)
    #1 0x50df89 in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:137:27
    #2 0x50df10 in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:188:32
    #3 0x50df10 in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::allocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:464:20
    #4 0x50de01 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_get_node() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:563:16
    #5 0x526aa0 in std::_Rb_tree_node<std::pair<int const, Client> >* std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_create_node<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:613:23
    #6 0x5259e2 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_Auto_node::_Auto_node<int&, Client>(std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >&, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1638:18
    #7 0x525537 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_emplace_hint_unique<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2463:13
    #8 0x524ac1 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace_hint<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:638:16
    #9 0x509fec in std::pair<std::_Rb_tree_iterator<std::pair<int const, Client> >, bool> std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:599:10
    #10 0x4fa391 in Server::_handleNewConnection() /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:269:11
    #11 0x501a0c in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:789:13
    #12 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/main.cpp:69:28
    #13 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/webserv_git/main.cpp:100:9
    #14 0x723baca29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Thread T19 created by T0 here:
    #0 0x48cd9c in pthread_create (/mnt/c/Users/Surface Book 3/Desktop/webserv_git/webserv_db+0x48cd9c)
    #1 0x723bacee6388 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe6388)
    #2 0x57744c in decltype(new ((void*)(0))std::thread(std::declval<ThreadPool::ThreadPool(unsigned long)::$_0>())) std::construct_at<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:97:39
    #3 0x576cf0 in void std::allocator_traits<std::allocator<std::thread> >::construct<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::allocator<std::thread>&, std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:518:4
    #4 0x576fe2 in void std::vector<std::thread, std::allocator<std::thread> >::_M_realloc_insert<ThreadPool::ThreadPool(unsigned long)::$_0>(__gnu_cxx::__normal_iterator<std::thread*, std::vector<std::thread, std::allocator<std::thread> > >, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:462:4
    #5 0x576894 in std::thread& std::vector<std::thread, std::allocator<std::thread> >::emplace_back<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #6 0x57651c in ThreadPool::ThreadPool(unsigned long) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/thread-pool.cpp:6:18
    #7 0x4f8226 in Server::Server(Server const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/server.cpp:71:21
    #8 0x4e60cc in void std::_Construct<Server, Server const&>(Server*, Server const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:119:25
    #9 0x4e5ffe in Server* std::__do_uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:120:6
    #10 0x4e5fb4 in Server* std::__uninitialized_copy<false>::__uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:137:11
    #11 0x4e5f7c in Server* std::uninitialized_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:184:14
    #12 0x4e5f38 in Server* std::__uninitialized_copy_a<Server const*, Server*, Server>(Server const*, Server const*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:372:14
    #13 0x4e5b31 in Server* std::__uninitialized_move_if_noexcept_a<Server*, Server*, std::allocator<Server> >(Server*, Server*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:396:14
    #14 0x4e50ce in void std::vector<Server, std::allocator<Server> >::_M_realloc_insert<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(__gnu_cxx::__normal_iterator<Server*, std::vector<Server, std::allocator<Server> > >, std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:486:5
    #15 0x4d99b7 in Server& std::vector<Server, std::allocator<Server> >::emplace_back<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #16 0x4d7030 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/webserv_git/main.cpp:58:21
    #17 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/webserv_git/main.cpp:100:9
    #18 0x723baca29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: heap-use-after-free /mnt/c/Users/Surface Book 3/Desktop/webserv_git/response.cpp:40:17 in Response::setStatusCode(HttpStatusCode)
Shadow bytes around the buggy address:
  0x0c267fff8000: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00
  0x0c267fff8010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff8020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff8030: 00 00 00 00 00 00 fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8040: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=>0x0c267fff8050: fd fd fd fd fd fd fd fd fd fd fd fd fd fd[fd]fd
  0x0c267fff8060: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa
  0x0c267fff8070: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8080: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8090: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff80a0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc
==22342==ABORTING



=================================================================
==28760==ERROR: AddressSanitizer: heap-use-after-free on address 0x613000000488 at pc 0x000000538736 bp 0x7f9de2ded530 sp 0x7f9de2ded528
READ of size 8 at 0x613000000488 thread T17
    #0 0x538735 in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_begin() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:747:29
    #1 0x53834a in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2546:43
    #2 0x5359e0 in std::multimap<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_multimap.h:872:21
    #3 0x534384 in Headers::getHeader(HeaderKey, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/headers.cpp:93:24
    #4 0x4fc100 in Server::_loadRequestConfig(Request&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:352:51
    #5 0x5059e8 in Server::_processRequestAsync(int, Client&)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:514:38
    #6 0x50577c in void std::__invoke_impl<void, Server::_processRequestAsync(int, Client&)::$_0&>(std::__invoke_other, Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #7 0x50574c in std::__invoke_result<Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #8 0x505728 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::__call<void>(std::tuple<>&&, std::_Index_tuple<>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:495:11
    #9 0x5056b3 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:580:17
    #10 0x5055ac in void std::__invoke_impl<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::__invoke_other, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #11 0x50557c in std::enable_if<is_invocable_r_v<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>, void>::type std::__invoke_r<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #12 0x50554d in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1489:13
    #13 0x50532d in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1430:6
    #14 0x5051ff in std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> std::__invoke_impl<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::__invoke_other, std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #15 0x505121 in std::enable_if<is_invocable_r_v<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()...>, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9
    #16 0x504eff in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #17 0x52b1c5 in std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #18 0x52aa45 in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:587:27
    #19 0x52b143 in void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:74:14
    #20 0x52af9b in std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #21 0x52af38 in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:852:4
    #22 0x52ae38 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:21
    #23 0x52add8 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::__invoke() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:16
    #24 0x7f9dee499ee7 in __pthread_once_slow nptl/./nptl/pthread_once.c:116:7
    #25 0x504e0a in __gthread_once(int*, void (*)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:700:12
    #26 0x52a80d in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:859:21
    #27 0x52a265 in std::__future_base::_State_baseV2::_M_set_result(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>, bool) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:426:2
    #28 0x5045a3 in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1492:8
    #29 0x530026 in std::packaged_task<void ()>::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1626:12
    #30 0x507a3c in std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/./thread-pool.hpp:66:35
    #31 0x5079fc in Server::_processRequestAsync(int, Client&)::$_0& std::__invoke_impl<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(std::__invoke_other, &&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #32 0x50798c in std::enable_if<is_invocable_r_v<Server::_processRequestAsync(int, Client&)::$_0&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...>, Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke_r<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(&&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #33 0x5077bc in std::_Function_handler<void (), std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #34 0x579542 in std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #35 0x577dd4 in ThreadPool::ThreadPool(unsigned long)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:30:17
    #36 0x577aac in void std::__invoke_impl<void, ThreadPool::ThreadPool(unsigned long)::$_0>(std::__invoke_other, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #37 0x577a3c in std::__invoke_result<ThreadPool::ThreadPool(unsigned long)::$_0>::type std::__invoke<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #38 0x577a14 in void std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:279:13
    #39 0x5779e4 in std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:286:11
    #40 0x5778f8 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:231:13
    #41 0x7f9dee8e62b2  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe62b2)
    #42 0x7f9dee494ac2 in start_thread nptl/./nptl/pthread_create.c:442:8
    #43 0x7f9dee52684f  misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81

0x613000000488 is located 200 bytes inside of 336-byte region [0x6130000003c0,0x613000000510)
freed by thread T0 here:
    #0 0x4d3fcd in operator delete(void*) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d3fcd)
    #1 0x50bd8c in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:158:2
    #2 0x50bd5c in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:200:25
    #3 0x50bd5c in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::deallocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:496:13
    #4 0x50bc19 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_put_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:567:9
    #5 0x50bb7d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_drop_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:634:2
    #6 0x5282bd in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_erase_aux(std::_Rb_tree_const_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2497:7
    #7 0x5280e9 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1211:2
    #8 0x50a75d in std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:1086:21
    #9 0x4faeaf in Server::_removeClient(int) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:298:11
    #10 0x4fc5ba in Server::_handleClientInput(int, Client&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:366:9
    #11 0x4fd197 in Server::_handleClientIo(int, short) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:413:3
    #12 0x501baa in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:792:13
    #13 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #14 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #15 0x7f9dee429d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

previously allocated by thread T0 here:
    #0 0x4d376d in operator new(unsigned long) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d376d)
    #1 0x50df89 in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:137:27
    #2 0x50df10 in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:188:32
    #3 0x50df10 in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::allocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:464:20
    #4 0x50de01 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_get_node() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:563:16
    #5 0x526aa0 in std::_Rb_tree_node<std::pair<int const, Client> >* std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_create_node<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:613:23
    #6 0x5259e2 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_Auto_node::_Auto_node<int&, Client>(std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >&, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1638:18
    #7 0x525537 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_emplace_hint_unique<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2463:13
    #8 0x524ac1 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace_hint<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:638:16
    #9 0x509fec in std::pair<std::_Rb_tree_iterator<std::pair<int const, Client> >, bool> std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:599:10
    #10 0x4fa391 in Server::_handleNewConnection() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:269:11
    #11 0x501a0c in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:789:13
    #12 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #13 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #14 0x7f9dee429d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Thread T17 created by T0 here:
    #0 0x48cd9c in pthread_create (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x48cd9c)
    #1 0x7f9dee8e6388 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe6388)
    #2 0x57757c in decltype(new ((void*)(0))std::thread(std::declval<ThreadPool::ThreadPool(unsigned long)::$_0>())) std::construct_at<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:97:39
    #3 0x576e20 in void std::allocator_traits<std::allocator<std::thread> >::construct<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::allocator<std::thread>&, std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:518:4
    #4 0x577112 in void std::vector<std::thread, std::allocator<std::thread> >::_M_realloc_insert<ThreadPool::ThreadPool(unsigned long)::$_0>(__gnu_cxx::__normal_iterator<std::thread*, std::vector<std::thread, std::allocator<std::thread> > >, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:462:4
    #5 0x5769c4 in std::thread& std::vector<std::thread, std::allocator<std::thread> >::emplace_back<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #6 0x57664c in ThreadPool::ThreadPool(unsigned long) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:6:18
    #7 0x4f8226 in Server::Server(Server const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:71:21
    #8 0x4e60cc in void std::_Construct<Server, Server const&>(Server*, Server const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:119:25
    #9 0x4e5ffe in Server* std::__do_uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:120:6
    #10 0x4e5fb4 in Server* std::__uninitialized_copy<false>::__uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:137:11
    #11 0x4e5f7c in Server* std::uninitialized_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:184:14
    #12 0x4e5f38 in Server* std::__uninitialized_copy_a<Server const*, Server*, Server>(Server const*, Server const*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:372:14
    #13 0x4e5b31 in Server* std::__uninitialized_move_if_noexcept_a<Server*, Server*, std::allocator<Server> >(Server*, Server*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:396:14
    #14 0x4e50ce in void std::vector<Server, std::allocator<Server> >::_M_realloc_insert<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(__gnu_cxx::__normal_iterator<Server*, std::vector<Server, std::allocator<Server> > >, std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:486:5
    #15 0x4d99b7 in Server& std::vector<Server, std::allocator<Server> >::emplace_back<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #16 0x4d7030 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:58:21
    #17 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #18 0x7f9dee429d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: heap-use-after-free /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:747:29 in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_begin() const
Shadow bytes around the buggy address:
  0x0c267fff8040: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c267fff8050: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c267fff8060: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa
  0x0c267fff8070: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd
  0x0c267fff8080: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=>0x0c267fff8090: fd[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c267fff80a0: fd fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff80b0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c267fff80c0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c267fff80d0: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa
  0x0c267fff80e0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc
==28760==ABORTING
==42214==ERROR: AddressSanitizer: heap-use-after-free on address 0x613000000828 at pc 0x0000004fb136 bp 0x7225b30e8610 sp 0x7225b30e8608
READ of size 8 at 0x613000000828 thread T22
    #0 0x4fb135 in Server::_prepareRequestProcessing(Client&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:312:29
    #1 0x506838 in Server::_processRequestAsync(int, Client&)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:517:15
    #2 0x5064ec in void std::__invoke_impl<void, Server::_processRequestAsync(int, Client&)::$_0&>(std::__invoke_other, Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #3 0x5064bc in std::__invoke_result<Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #4 0x506498 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::__call<void>(std::tuple<>&&, std::_Index_tuple<>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:495:11
    #5 0x506423 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:580:17
    #6 0x50631c in void std::__invoke_impl<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::__invoke_other, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #7 0x5062ec in std::enable_if<is_invocable_r_v<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>, void>::type std::__invoke_r<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #8 0x5062bd in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1489:13
    #9 0x50609d in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1430:6
    #10 0x505f6f in std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> std::__invoke_impl<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::__invoke_other, std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #11 0x505e91 in std::enable_if<is_invocable_r_v<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()...>, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9
    #12 0x505c6f in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #13 0x52c5a5 in std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #14 0x52be25 in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:587:27
    #15 0x52c523 in void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:74:14
    #16 0x52c37b in std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #17 0x52c318 in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:852:4
    #18 0x52c218 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:21
    #19 0x52c1b8 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::__invoke() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:16
    #20 0x7225c0e99ee7 in __pthread_once_slow nptl/./nptl/pthread_once.c:116:7
    #21 0x505b7a in __gthread_once(int*, void (*)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:700:12
    #22 0x52bbed in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:859:21
    #23 0x52b645 in std::__future_base::_State_baseV2::_M_set_result(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>, bool) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:426:2
    #24 0x505313 in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1492:8
    #25 0x531406 in std::packaged_task<void ()>::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1626:12
    #26 0x508e1c in std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/./thread-pool.hpp:66:35
    #27 0x508ddc in Server::_processRequestAsync(int, Client&)::$_0& std::__invoke_impl<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(std::__invoke_other, &&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #28 0x508d6c in std::enable_if<is_invocable_r_v<Server::_processRequestAsync(int, Client&)::$_0&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...>, Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke_r<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(&&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #29 0x508b9c in std::_Function_handler<void (), std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #30 0x57a922 in std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #31 0x5791b4 in ThreadPool::ThreadPool(unsigned long)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:30:17
    #32 0x578e8c in void std::__invoke_impl<void, ThreadPool::ThreadPool(unsigned long)::$_0>(std::__invoke_other, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #33 0x578e1c in std::__invoke_result<ThreadPool::ThreadPool(unsigned long)::$_0>::type std::__invoke<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #34 0x578df4 in void std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:279:13
    #35 0x578dc4 in std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:286:11
    #36 0x578cd8 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:231:13
    #37 0x7225c12e62b2  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe62b2)
    #38 0x7225c0e94ac2 in start_thread nptl/./nptl/pthread_create.c:442:8
    #39 0x7225c0f2684f  misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81

0x613000000828 is located 232 bytes inside of 336-byte region [0x613000000740,0x613000000890)
freed by thread T0 here:
    #0 0x4d3fcd in operator delete(void*) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d3fcd)
    #1 0x50d16c in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:158:2
    #2 0x50d13c in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:200:25
    #3 0x50d13c in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::deallocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:496:13
    #4 0x50cff9 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_put_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:567:9
    #5 0x50cf5d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_drop_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:634:2
    #6 0x52924d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_erase_aux(std::_Rb_tree_const_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2497:7
    #7 0x529079 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1211:2
    #8 0x50b80d in std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:1086:21
    #9 0x4facc7 in Server::_removeClient(std::_Rb_tree_iterator<std::pair<int const, Client> >) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:295:14
    #10 0x4fc4d3 in Server::_handleClientInput(std::_Rb_tree_iterator<std::pair<int const, Client> >) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:367:9
    #11 0x4fd3c4 in Server::_handleClientIo(int, short) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:417:9
    #12 0x50291a in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:831:13
    #13 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #14 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #15 0x7225c0e29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

previously allocated by thread T0 here:
    #0 0x4d376d in operator new(unsigned long) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d376d)
    #1 0x50f369 in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:137:27
    #2 0x50f2f0 in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:188:32
    #3 0x50f2f0 in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::allocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:464:20
    #4 0x50f1e1 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_get_node() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:563:16
    #5 0x527e80 in std::_Rb_tree_node<std::pair<int const, Client> >* std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_create_node<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:613:23
    #6 0x526dc2 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_Auto_node::_Auto_node<int&, Client>(std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >&, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1638:18
    #7 0x526917 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_emplace_hint_unique<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2463:13
    #8 0x525ea1 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace_hint<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:638:16
    #9 0x50b3cc in std::pair<std::_Rb_tree_iterator<std::pair<int const, Client> >, bool> std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:599:10
    #10 0x4fa391 in Server::_handleNewConnection() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:269:11
    #11 0x50277c in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:828:13
    #12 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #13 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #14 0x7225c0e29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Thread T22 created by T0 here:
    #0 0x48cd9c in pthread_create (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x48cd9c)
    #1 0x7225c12e6388 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe6388)
    #2 0x57895c in decltype(new ((void*)(0))std::thread(std::declval<ThreadPool::ThreadPool(unsigned long)::$_0>())) std::construct_at<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:97:39
    #3 0x578200 in void std::allocator_traits<std::allocator<std::thread> >::construct<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::allocator<std::thread>&, std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:518:4
    #4 0x577ced in std::thread& std::vector<std::thread, std::allocator<std::thread> >::emplace_back<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:117:6
    #5 0x577a2c in ThreadPool::ThreadPool(unsigned long) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:6:18
    #6 0x4f8226 in Server::Server(Server const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:71:21
    #7 0x4e60cc in void std::_Construct<Server, Server const&>(Server*, Server const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:119:25
    #8 0x4e5ffe in Server* std::__do_uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:120:6
    #9 0x4e5fb4 in Server* std::__uninitialized_copy<false>::__uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:137:11
    #10 0x4e5f7c in Server* std::uninitialized_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:184:14
    #11 0x4e5f38 in Server* std::__uninitialized_copy_a<Server const*, Server*, Server>(Server const*, Server const*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:372:14
    #12 0x4e5b31 in Server* std::__uninitialized_move_if_noexcept_a<Server*, Server*, std::allocator<Server> >(Server*, Server*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:396:14
    #13 0x4e50ce in void std::vector<Server, std::allocator<Server> >::_M_realloc_insert<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(__gnu_cxx::__normal_iterator<Server*, std::vector<Server, std::allocator<Server> > >, std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:486:5
    #14 0x4d99b7 in Server& std::vector<Server, std::allocator<Server> >::emplace_back<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #15 0x4d7030 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:58:21
    #16 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #17 0x7225c0e29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: heap-use-after-free /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:312:29 in Server::_prepareRequestProcessing(Client&)
Shadow bytes around the buggy address:
  0x0c267fff80b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff80c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff80d0: 00 00 00 00 00 00 00 00 00 00 fa fa fa fa fa fa
  0x0c267fff80e0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd
  0x0c267fff80f0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=>0x0c267fff8100: fd fd fd fd fd[fd]fd fd fd fd fd fd fd fd fd fd
  0x0c267fff8110: fd fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8120: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8130: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8140: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8150: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc


  d 0 bytes from fd: 7
[DEBUG] No session cookie found for client; creating a new session
[ERROR] Failed to create a new session
[DEBUG] Removed client with fd: 7
=================================================================
==43751==ERROR: AddressSanitizer: heap-use-after-free on address 0x6130000002c8 at pc 0x000000539b16 bp 0x716d55deb370 sp 0x716d55deb368
READ of size 8 at 0x6130000002c8 thread T19
    #0 0x539b15 in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_begin() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:747:29
    #1 0x53972a in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2546:43
    #2 0x536dc0 in std::multimap<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_multimap.h:872:21
    #3 0x535764 in Headers::getHeader(HeaderKey, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/headers.cpp:93:24
    #4 0x4fbe90 in Server::_loadRequestConfig(Request&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:350:51
    #5 0x50684b in Server::_processRequestAsync(int, Client&)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:518:38
    #6 0x5064ec in void std::__invoke_impl<void, Server::_processRequestAsync(int, Client&)::$_0&>(std::__invoke_other, Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #7 0x5064bc in std::__invoke_result<Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #8 0x506498 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::__call<void>(std::tuple<>&&, std::_Index_tuple<>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:495:11
    #9 0x506423 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:580:17
    #10 0x50631c in void std::__invoke_impl<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::__invoke_other, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #11 0x5062ec in std::enable_if<is_invocable_r_v<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>, void>::type std::__invoke_r<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #12 0x5062bd in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1489:13
    #13 0x50609d in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1430:6
    #14 0x505f6f in std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> std::__invoke_impl<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::__invoke_other, std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #15 0x505e91 in std::enable_if<is_invocable_r_v<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()...>, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9
    #16 0x505c6f in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #17 0x52c5a5 in std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #18 0x52be25 in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:587:27
    #19 0x52c523 in void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:74:14
    #20 0x52c37b in std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #21 0x52c318 in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:852:4
    #22 0x52c218 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:21
    #23 0x52c1b8 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::__invoke() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:16
    #24 0x716d62499ee7 in __pthread_once_slow nptl/./nptl/pthread_once.c:116:7
    #25 0x505b7a in __gthread_once(int*, void (*)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:700:12
    #26 0x52bbed in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:859:21
    #27 0x52b645 in std::__future_base::_State_baseV2::_M_set_result(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>, bool) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:426:2
    #28 0x505313 in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1492:8
    #29 0x531406 in std::packaged_task<void ()>::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1626:12
    #30 0x508e1c in std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/./thread-pool.hpp:66:35
    #31 0x508ddc in Server::_processRequestAsync(int, Client&)::$_0& std::__invoke_impl<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(std::__invoke_other, &&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #32 0x508d6c in std::enable_if<is_invocable_r_v<Server::_processRequestAsync(int, Client&)::$_0&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...>, Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke_r<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(&&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #33 0x508b9c in std::_Function_handler<void (), std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #34 0x57a922 in std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #35 0x5791b4 in ThreadPool::ThreadPool(unsigned long)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:30:17
    #36 0x578e8c in void std::__invoke_impl<void, ThreadPool::ThreadPool(unsigned long)::$_0>(std::__invoke_other, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #37 0x578e1c in std::__invoke_result<ThreadPool::ThreadPool(unsigned long)::$_0>::type std::__invoke<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #38 0x578df4 in void std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:279:13
    #39 0x578dc4 in std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:286:11
    #40 0x578cd8 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:231:13
    #41 0x716d628e62b2  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe62b2)
    #42 0x716d62494ac2 in start_thread nptl/./nptl/pthread_create.c:442:8
    #43 0x716d6252684f  misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81

0x6130000002c8 is located 200 bytes inside of 336-byte region [0x613000000200,0x613000000350)
freed by thread T0 here:
    #0 0x4d3fcd in operator delete(void*) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d3fcd)
    #1 0x50d16c in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:158:2
    #2 0x50d13c in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:200:25
    #3 0x50d13c in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::deallocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:496:13
    #4 0x50cff9 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_put_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:567:9
    #5 0x50cf5d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_drop_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:634:2
    #6 0x52924d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_erase_aux(std::_Rb_tree_const_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2497:7
    #7 0x529079 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1211:2
    #8 0x50b80d in std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:1086:21
    #9 0x4facc7 in Server::_removeClient(std::_Rb_tree_iterator<std::pair<int const, Client> >) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:295:14
    #10 0x4fc4d3 in Server::_handleClientInput(std::_Rb_tree_iterator<std::pair<int const, Client> >) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:367:9
    #11 0x4fd3c4 in Server::_handleClientIo(int, short) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:417:9
    #12 0x50291a in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:831:13
    #13 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #14 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #15 0x716d62429d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

previously allocated by thread T0 here:
    #0 0x4d376d in operator new(unsigned long) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d376d)
    #1 0x50f369 in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:137:27
    #2 0x50f2f0 in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:188:32
    #3 0x50f2f0 in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::allocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:464:20
    #4 0x50f1e1 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_get_node() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:563:16
    #5 0x527e80 in std::_Rb_tree_node<std::pair<int const, Client> >* std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_create_node<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:613:23
    #6 0x526dc2 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_Auto_node::_Auto_node<int&, Client>(std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >&, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1638:18
    #7 0x526917 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_emplace_hint_unique<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2463:13
    #8 0x525ea1 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace_hint<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:638:16
    #9 0x50b3cc in std::pair<std::_Rb_tree_iterator<std::pair<int const, Client> >, bool> std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:599:10
    #10 0x4fa391 in Server::_handleNewConnection() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:269:11
    #11 0x50277c in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:828:13
    #12 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #13 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #14 0x716d62429d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Thread T19 created by T0 here:
    #0 0x48cd9c in pthread_create (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x48cd9c)
    #1 0x716d628e6388 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe6388)
    #2 0x57895c in decltype(new ((void*)(0))std::thread(std::declval<ThreadPool::ThreadPool(unsigned long)::$_0>())) std::construct_at<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:97:39
    #3 0x578200 in void std::allocator_traits<std::allocator<std::thread> >::construct<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::allocator<std::thread>&, std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:518:4
    #4 0x5784f2 in void std::vector<std::thread, std::allocator<std::thread> >::_M_realloc_insert<ThreadPool::ThreadPool(unsigned long)::$_0>(__gnu_cxx::__normal_iterator<std::thread*, std::vector<std::thread, std::allocator<std::thread> > >, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:462:4
    #5 0x577da4 in std::thread& std::vector<std::thread, std::allocator<std::thread> >::emplace_back<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #6 0x577a2c in ThreadPool::ThreadPool(unsigned long) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:6:18
    #7 0x4f8226 in Server::Server(Server const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:71:21
    #8 0x4e60cc in void std::_Construct<Server, Server const&>(Server*, Server const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:119:25
    #9 0x4e5ffe in Server* std::__do_uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:120:6
    #10 0x4e5fb4 in Server* std::__uninitialized_copy<false>::__uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:137:11
    #11 0x4e5f7c in Server* std::uninitialized_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:184:14
    #12 0x4e5f38 in Server* std::__uninitialized_copy_a<Server const*, Server*, Server>(Server const*, Server const*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:372:14
    #13 0x4e5b31 in Server* std::__uninitialized_move_if_noexcept_a<Server*, Server*, std::allocator<Server> >(Server*, Server*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:396:14
    #14 0x4e50ce in void std::vector<Server, std::allocator<Server> >::_M_realloc_insert<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(__gnu_cxx::__normal_iterator<Server*, std::vector<Server, std::allocator<Server> > >, std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:486:5
    #15 0x4d99b7 in Server& std::vector<Server, std::allocator<Server> >::emplace_back<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #16 0x4d7030 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:58:21
    #17 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #18 0x716d62429d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: heap-use-after-free /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:747:29 in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_begin() const
Shadow bytes around the buggy address:
  0x0c267fff8000: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00
  0x0c267fff8010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff8020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff8030: 00 00 00 00 00 00 fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8040: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=>0x0c267fff8050: fd fd fd fd fd fd fd fd fd[fd]fd fd fd fd fd fd
  0x0c267fff8060: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa
  0x0c267fff8070: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8080: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8090: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff80a0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc


  
==49235==ERROR: AddressSanitizer: heap-use-after-free on address 0x613000003588 at pc 0x000000539cc6 bp 0x7a34d66e9370 sp 0x7a34d66e9368
READ of size 8 at 0x613000003588 thread T21
    #0 0x539cc5 in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_begin() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:747:29
    #1 0x5398da in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2546:43
    #2 0x536f70 in std::multimap<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_multimap.h:872:21
    #3 0x535914 in Headers::getHeader(HeaderKey, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/headers.cpp:93:24
    #4 0x4fbe90 in Server::_loadRequestConfig(Request&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:350:51
    #5 0x5069fb in Server::_processRequestAsync(int, Client&)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:525:38
    #6 0x50669c in void std::__invoke_impl<void, Server::_processRequestAsync(int, Client&)::$_0&>(std::__invoke_other, Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #7 0x50666c in std::__invoke_result<Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #8 0x506648 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::__call<void>(std::tuple<>&&, std::_Index_tuple<>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:495:11
    #9 0x5065d3 in void std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>::operator()<void>() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/functional:580:17
    #10 0x5064cc in void std::__invoke_impl<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::__invoke_other, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #11 0x50649c in std::enable_if<is_invocable_r_v<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>, void>::type std::__invoke_r<void, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&>(std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #12 0x50646d in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1489:13
    #13 0x50624d in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1430:6
    #14 0x50611f in std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> std::__invoke_impl<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::__invoke_other, std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #15 0x506041 in std::enable_if<is_invocable_r_v<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()...>, std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void>&>(std::allocator<int>&&, void (&&)()...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9
    #16 0x505e1f in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run()::'lambda'(), void> >::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #17 0x52c755 in std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #18 0x52bfd5 in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:587:27
    #19 0x52c6d3 in void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:74:14
    #20 0x52c52b in std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #21 0x52c4c8 in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:852:4
    #22 0x52c3c8 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:21
    #23 0x52c368 in std::once_flag::_Prepare_execution::_Prepare_execution<void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::'lambda'()>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::'lambda'()::__invoke() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:788:16
    #24 0x7a34e3c99ee7 in __pthread_once_slow nptl/./nptl/pthread_once.c:116:7
    #25 0x505d2a in __gthread_once(int*, void (*)()) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:700:12
    #26 0x52bd9d in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/mutex:859:21
    #27 0x52b7f5 in std::__future_base::_State_baseV2::_M_set_result(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>, bool) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:426:2
    #28 0x5054c3 in std::__future_base::_Task_state<std::_Bind<Server::_processRequestAsync(int, Client&)::$_0 ()>, std::allocator<int>, void ()>::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1492:8
    #29 0x5315b6 in std::packaged_task<void ()>::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/future:1626:12
    #30 0x508fcc in std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/./thread-pool.hpp:66:35
    #31 0x508f8c in Server::_processRequestAsync(int, Client&)::$_0& std::__invoke_impl<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(std::__invoke_other, &&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #32 0x508f1c in std::enable_if<is_invocable_r_v<Server::_processRequestAsync(int, Client&)::$_0&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...>, Server::_processRequestAsync(int, Client&)::$_0&>::type std::__invoke_r<void, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&>(&&, std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()&...) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:111:2
    #33 0x508d4c in std::_Function_handler<void (), std::future<std::result_of<Server::_processRequestAsync(int, Client&)::$_0& ()>::type> ThreadPool::enqueue<Server::_processRequestAsync(int, Client&)::$_0&>(Server::_processRequestAsync(int, Client&)::$_0&)::'lambda'()>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9
    #34 0x57aad2 in std::function<void ()>::operator()() const /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9
    #35 0x579364 in ThreadPool::ThreadPool(unsigned long)::$_0::operator()() const /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:30:17
    #36 0x57903c in void std::__invoke_impl<void, ThreadPool::ThreadPool(unsigned long)::$_0>(std::__invoke_other, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14
    #37 0x578fcc in std::__invoke_result<ThreadPool::ThreadPool(unsigned long)::$_0>::type std::__invoke<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:96:14
    #38 0x578fa4 in void std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:279:13
    #39 0x578f74 in std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:286:11
    #40 0x578e88 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<ThreadPool::ThreadPool(unsigned long)::$_0> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_thread.h:231:13
    #41 0x7a34e40e62b2  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe62b2)
    #42 0x7a34e3c94ac2 in start_thread nptl/./nptl/pthread_create.c:442:8
    #43 0x7a34e3d2684f  misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81

0x613000003588 is located 200 bytes inside of 336-byte region [0x6130000034c0,0x613000003610)
freed by thread T0 here:
    #0 0x4d3fcd in operator delete(void*) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d3fcd)
    #1 0x50d31c in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:158:2
    #2 0x50d2ec in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::deallocate(std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:200:25
    #3 0x50d2ec in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::deallocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, std::_Rb_tree_node<std::pair<int const, Client> >*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:496:13
    #4 0x50d1a9 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_put_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:567:9
    #5 0x50d10d in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_drop_node(std::_Rb_tree_node<std::pair<int const, Client> >*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:634:2
    #6 0x5293fd in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_erase_aux(std::_Rb_tree_const_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2497:7
    #7 0x529229 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1211:2
    #8 0x50b9bd in std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::erase[abi:cxx11](std::_Rb_tree_iterator<std::pair<int const, Client> >) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:1086:21
    #9 0x4facc7 in Server::_removeClient(std::_Rb_tree_iterator<std::pair<int const, Client> >) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:295:14
    #10 0x4fc5df in Server::_handleClientInput(int) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:370:3
    #11 0x4fd581 in Server::_handleClientIo(int, short) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:422:3
    #12 0x502aca in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:838:13
    #13 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #14 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #15 0x7a34e3c29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

previously allocated by thread T0 here:
    #0 0x4d376d in operator new(unsigned long) (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x4d376d)
    #1 0x50f519 in std::__new_allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/new_allocator.h:137:27
    #2 0x50f4a0 in std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >::allocate(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/allocator.h:188:32
    #3 0x50f4a0 in std::allocator_traits<std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > > >::allocate(std::allocator<std::_Rb_tree_node<std::pair<int const, Client> > >&, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:464:20
    #4 0x50f391 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_get_node() /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:563:16
    #5 0x528030 in std::_Rb_tree_node<std::pair<int const, Client> >* std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_create_node<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:613:23
    #6 0x526f72 in std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_Auto_node::_Auto_node<int&, Client>(std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >&, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:1638:18
    #7 0x526ac7 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::_Rb_tree<int, std::pair<int const, Client>, std::_Select1st<std::pair<int const, Client> >, std::less<int>, std::allocator<std::pair<int const, Client> > >::_M_emplace_hint_unique<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:2463:13
    #8 0x526051 in std::_Rb_tree_iterator<std::pair<int const, Client> > std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace_hint<int&, Client>(std::_Rb_tree_const_iterator<std::pair<int const, Client> >, int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:638:16
    #9 0x50b57c in std::pair<std::_Rb_tree_iterator<std::pair<int const, Client> >, bool> std::map<int, Client, std::less<int>, std::allocator<std::pair<int const, Client> > >::emplace<int&, Client>(int&, Client&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_map.h:599:10
    #10 0x4fa391 in Server::_handleNewConnection() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:269:11
    #11 0x50292c in Server::runOnce() /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:835:13
    #12 0x4d73f9 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:69:28
    #13 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #14 0x7a34e3c29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Thread T21 created by T0 here:
    #0 0x48cd9c in pthread_create (/mnt/c/Users/Surface Book 3/Desktop/wwwebserv/webserv_db+0x48cd9c)
    #1 0x7a34e40e6388 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xe6388)
    #2 0x578b0c in decltype(new ((void*)(0))std::thread(std::declval<ThreadPool::ThreadPool(unsigned long)::$_0>())) std::construct_at<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:97:39
    #3 0x5783b0 in void std::allocator_traits<std::allocator<std::thread> >::construct<std::thread, ThreadPool::ThreadPool(unsigned long)::$_0>(std::allocator<std::thread>&, std::thread*, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/alloc_traits.h:518:4
    #4 0x5786a2 in void std::vector<std::thread, std::allocator<std::thread> >::_M_realloc_insert<ThreadPool::ThreadPool(unsigned long)::$_0>(__gnu_cxx::__normal_iterator<std::thread*, std::vector<std::thread, std::allocator<std::thread> > >, ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:462:4
    #5 0x577f54 in std::thread& std::vector<std::thread, std::allocator<std::thread> >::emplace_back<ThreadPool::ThreadPool(unsigned long)::$_0>(ThreadPool::ThreadPool(unsigned long)::$_0&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #6 0x577bdc in ThreadPool::ThreadPool(unsigned long) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/thread-pool.cpp:6:18
    #7 0x4f8226 in Server::Server(Server const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/server.cpp:71:21
    #8 0x4e60cc in void std::_Construct<Server, Server const&>(Server*, Server const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_construct.h:119:25
    #9 0x4e5ffe in Server* std::__do_uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:120:6
    #10 0x4e5fb4 in Server* std::__uninitialized_copy<false>::__uninit_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:137:11
    #11 0x4e5f7c in Server* std::uninitialized_copy<Server const*, Server*>(Server const*, Server const*, Server*) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:184:14
    #12 0x4e5f38 in Server* std::__uninitialized_copy_a<Server const*, Server*, Server>(Server const*, Server const*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:372:14
    #13 0x4e5b31 in Server* std::__uninitialized_move_if_noexcept_a<Server*, Server*, std::allocator<Server> >(Server*, Server*, Server*, std::allocator<Server>&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_uninitialized.h:396:14
    #14 0x4e50ce in void std::vector<Server, std::allocator<Server> >::_M_realloc_insert<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(__gnu_cxx::__normal_iterator<Server*, std::vector<Server, std::allocator<Server> > >, std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:486:5
    #15 0x4d99b7 in Server& std::vector<Server, std::allocator<Server> >::emplace_back<std::vector<ServerConfig, std::allocator<ServerConfig> > const&>(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/vector.tcc:123:4
    #16 0x4d7030 in run_servers(std::vector<ServerConfig, std::allocator<ServerConfig> > const&) /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:58:21
    #17 0x4d7d63 in main /mnt/c/Users/Surface Book 3/Desktop/wwwebserv/main.cpp:100:9
    #18 0x7a34e3c29d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: heap-use-after-free /usr/bin/../lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/stl_tree.h:747:29 in std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_begin() const
Shadow bytes around the buggy address:
  0x0c267fff8660: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff8670: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c267fff8680: 00 00 00 00 00 00 00 00 00 00 fa fa fa fa fa fa
  0x0c267fff8690: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd
  0x0c267fff86a0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=>0x0c267fff86b0: fd[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c267fff86c0: fd fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff86d0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff86e0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff86f0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c267fff8700: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc